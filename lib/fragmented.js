'use strict';

(function () {
  var changeHandlers = [];

  function fragmentFromHash() {
    var hash = window.location.hash,
        fragment = hash.substr(1); ///

    return fragment;
  }

  window.onhashchange = function () {
    var fragment = fragmentFromHash();

    changeHandlers.forEach(function (changeHandler) {
      changeHandler(fragment);
    });
  };

  function getFragment() {
    var fragment = fragmentFromHash(),
        fragmentPrototype = Object.getPrototypeOf(fragment);

    fragmentPrototype.onChange = function (changeHandler) {
      changeHandlers.push(changeHandler);
    };

    fragmentPrototype.offChange = function (changeHandler) {
      var index = changeHandlers.indexOf(changeHandler);

      if (index > -1) {
        changeHandlers.splice(index, 1);
      }
    };

    return fragment;
  }

  function setFragment(fragment) {
    var hash = fragment; ///

    window.location.hash = hash;
  }

  Object.defineProperty(window, 'fragment', {
    get: getFragment,
    set: setFragment
  });
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9mcmFnbWVudGVkLmpzIl0sIm5hbWVzIjpbImNoYW5nZUhhbmRsZXJzIiwiZnJhZ21lbnRGcm9tSGFzaCIsImhhc2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImZyYWdtZW50Iiwic3Vic3RyIiwib25oYXNoY2hhbmdlIiwiZm9yRWFjaCIsImNoYW5nZUhhbmRsZXIiLCJnZXRGcmFnbWVudCIsImZyYWdtZW50UHJvdG90eXBlIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJvbkNoYW5nZSIsInB1c2giLCJvZmZDaGFuZ2UiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJzZXRGcmFnbWVudCIsImRlZmluZVByb3BlcnR5IiwiZ2V0Iiwic2V0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxDQUFDLFlBQVc7QUFDVixNQUFNQSxpQkFBaUIsRUFBdkI7O0FBRUEsV0FBU0MsZ0JBQVQsR0FBNEI7QUFDMUIsUUFBTUMsT0FBT0MsT0FBT0MsUUFBUCxDQUFnQkYsSUFBN0I7QUFBQSxRQUNNRyxXQUFXSCxLQUFLSSxNQUFMLENBQVksQ0FBWixDQURqQixDQUQwQixDQUVROztBQUVsQyxXQUFPRCxRQUFQO0FBQ0Q7O0FBRURGLFNBQU9JLFlBQVAsR0FBc0IsWUFBVztBQUMvQixRQUFNRixXQUFXSixrQkFBakI7O0FBRUFELG1CQUFlUSxPQUFmLENBQXVCLFVBQVNDLGFBQVQsRUFBd0I7QUFDN0NBLG9CQUFjSixRQUFkO0FBQ0QsS0FGRDtBQUdELEdBTkQ7O0FBUUEsV0FBU0ssV0FBVCxHQUF1QjtBQUNyQixRQUFNTCxXQUFXSixrQkFBakI7QUFBQSxRQUNNVSxvQkFBb0JDLE9BQU9DLGNBQVAsQ0FBc0JSLFFBQXRCLENBRDFCOztBQUdBTSxzQkFBa0JHLFFBQWxCLEdBQTZCLFVBQVNMLGFBQVQsRUFBd0I7QUFDbERULHFCQUFlZSxJQUFmLENBQW9CTixhQUFwQjtBQUNGLEtBRkQ7O0FBSUFFLHNCQUFrQkssU0FBbEIsR0FBOEIsVUFBU1AsYUFBVCxFQUF3QjtBQUNwRCxVQUFNUSxRQUFRakIsZUFBZWtCLE9BQWYsQ0FBdUJULGFBQXZCLENBQWQ7O0FBRUEsVUFBSVEsUUFBUSxDQUFDLENBQWIsRUFBZ0I7QUFDZGpCLHVCQUFlbUIsTUFBZixDQUFzQkYsS0FBdEIsRUFBNkIsQ0FBN0I7QUFDRDtBQUNGLEtBTkQ7O0FBUUEsV0FBT1osUUFBUDtBQUNEOztBQUVELFdBQVNlLFdBQVQsQ0FBcUJmLFFBQXJCLEVBQStCO0FBQzdCLFFBQU1ILE9BQU9HLFFBQWIsQ0FENkIsQ0FDTDs7QUFFeEJGLFdBQU9DLFFBQVAsQ0FBZ0JGLElBQWhCLEdBQXVCQSxJQUF2QjtBQUNEOztBQUVEVSxTQUFPUyxjQUFQLENBQXNCbEIsTUFBdEIsRUFBOEIsVUFBOUIsRUFBMEM7QUFDeENtQixTQUFLWixXQURtQztBQUV4Q2EsU0FBS0g7QUFGbUMsR0FBMUM7QUFJRCxDQS9DRCIsImZpbGUiOiJmcmFnbWVudGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGNoYW5nZUhhbmRsZXJzID0gW107XG5cbiAgZnVuY3Rpb24gZnJhZ21lbnRGcm9tSGFzaCgpIHtcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gsXG4gICAgICAgICAgZnJhZ21lbnQgPSBoYXNoLnN1YnN0cigxKTsgIC8vL1xuXG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG5cbiAgd2luZG93Lm9uaGFzaGNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZnJhZ21lbnRGcm9tSGFzaCgpO1xuXG4gICAgY2hhbmdlSGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2VIYW5kbGVyKSB7XG4gICAgICBjaGFuZ2VIYW5kbGVyKGZyYWdtZW50KTtcbiAgICB9KVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEZyYWdtZW50KCkge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZnJhZ21lbnRGcm9tSGFzaCgpLFxuICAgICAgICAgIGZyYWdtZW50UHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGZyYWdtZW50KTtcblxuICAgIGZyYWdtZW50UHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24oY2hhbmdlSGFuZGxlcikge1xuICAgICAgIGNoYW5nZUhhbmRsZXJzLnB1c2goY2hhbmdlSGFuZGxlcik7XG4gICAgfTtcblxuICAgIGZyYWdtZW50UHJvdG90eXBlLm9mZkNoYW5nZSA9IGZ1bmN0aW9uKGNoYW5nZUhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gY2hhbmdlSGFuZGxlcnMuaW5kZXhPZihjaGFuZ2VIYW5kbGVyKTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgY2hhbmdlSGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnJhZ21lbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRGcmFnbWVudChmcmFnbWVudCkge1xuICAgIGNvbnN0IGhhc2ggPSBmcmFnbWVudDsgIC8vL1xuXG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2ZyYWdtZW50Jywge1xuICAgIGdldDogZ2V0RnJhZ21lbnQsXG4gICAgc2V0OiBzZXRGcmFnbWVudFxuICB9KTtcbn0pKCk7XG4iXX0=